<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Hardin ‚Äì ≈ûehir Anƒ± Alb√ºm√ºn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg: #f6f4f1;
      --card-bg: #ffffff;
      --text: #2d3029;
      --accent: #745e4d;
      --accent-soft: #e3dfd8;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    /* √úST BAR */
    .topbar {
      width: 100%;
      padding: 10px 16px;
      background: #2d3029;
      color: #f6f4f1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .topbar-title {
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 0.9rem;
    }

    .page {
      max-width: 960px;
      margin: 18px auto 32px;
      padding: 0 14px;
    }

    .card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 18px 16px 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.06);
      border: 1px solid rgba(0,0,0,0.04);
    }

    h1 {
      margin: 0 0 6px;
      font-size: 1.4rem;
    }

    .subtitle {
      font-size: 0.9rem;
      margin: 0 0 10px;
      line-height: 1.45;
    }

    .note {
      font-size: 0.78rem;
      color: #7a7a7a;
      margin-bottom: 14px;
    }

    .btn-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }

    .btn {
      border-radius: 999px;
      padding: 11px 20px;
      font-size: 0.96rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.12s ease;
      border: none;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--accent);
      color: #fff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.18);
    }

    .btn-primary:active,
    .btn-ghost:active,
    .btn-secondary:active {
      transform: translateY(1px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.16);
    }

    .btn-secondary {
      background: var(--accent-soft);
      color: var(--text);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text);
      padding-left: 0;
      padding-right: 0;
      box-shadow: none;
      font-size: 0.86rem;
    }

    .btn-emoji {
      font-size: 1rem;
    }

    .counter {
      font-size: 0.8rem;
      color: #777;
      margin-top: 6px;
    }

    .city-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.04);
      font-size: 0.78rem;
      margin-top: 6px;
    }

    .city-tag span {
      opacity: 0.7;
    }

    .hero-image {
      width: 100%;
      border-radius: 14px;
      overflow: hidden;
      margin: 14px 0 4px;
      max-height: 220px;
    }

    .hero-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* ALB√úM G√ñR√úN√úM√ú */
    #photos {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      gap: 10px;
      margin-top: 16px;
    }

    .photo {
      position: relative;
      border-radius: 14px;
      overflow: hidden;
      background: #d9d9d9;
      aspect-ratio: 3 / 4;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }

    .photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .delete {
      position: absolute;
      top: 6px;
      right: 6px;
      background: rgba(0,0,0,0.6);
      width: 26px;
      height: 26px;
      border-radius: 999px;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      cursor: pointer;
      backdrop-filter: blur(3px);
    }

    .empty {
      margin-top: 10px;
      color: #777;
      font-size: 0.86rem;
    }

    #fileInput {
      display: none;
    }

    /* G√ñR√úN√úM GE√áƒ∞≈ûLERƒ∞ */
    .view {
      display: none;
    }

    .view.active {
      display: block;
    }

    /* SLIDESHOW OVERLAY */
    .slideshow-overlay {
      position: fixed;
      inset: 0;
      background: #000;
      color: #fff;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }

    .slideshow-overlay.active {
      display: flex;
    }

    .slide-img-wrap {
      max-width: 100%;
      max-height: calc(100vh - 110px);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }

    .slide-img-wrap img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .slide-top {
      position: absolute;
      top: 10px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 14px;
      font-size: 0.9rem;
    }

    .slide-btn {
      background: rgba(0,0,0,0.5);
      border-radius: 999px;
      padding: 6px 10px;
      border: none;
      color: #fff;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .slide-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.5);
      border: none;
      color: #fff;
      width: 38px;
      height: 38px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .slide-nav.prev {
      left: 10px;
    }

    .slide-nav.next {
      right: 10px;
    }

    .slide-counter {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    @media (min-width: 768px) {
      .card {
        padding: 22px 22px 24px;
      }
      h1 {
        font-size: 1.6rem;
      }
      .hero-image {
        max-height: 260px;
      }
    }
  </style>
</head>
<body>

  <div class="topbar">
    <div class="topbar-title">HARDƒ∞N ‚Ä¢ AKILLI ANI MAGNETƒ∞</div>
  </div>

  <div class="page">

    <!-- 1) ANA SAYFA -->
    <section id="view-home" class="view active">
      <div class="card">
        <div class="city-tag">
          <strong>≈ûehir:</strong> <span>Samsun ≈ûehri</span>
        </div>

        <div class="hero-image">
          <!-- Buraya istediƒüin ≈üehir g√∂rselinin linkini koyabilirsin -->
          <img src="https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress&cs=tinysrgb&w=1200"
               alt="≈ûehir manzarasƒ±">
        </div>

        <h1>≈ûehir Anƒ± Alb√ºm√ºn</h1>
        <p class="subtitle">
          Bu magneti okuttuƒüunda, bu sayfa senin o ≈üehre ait
          <strong>ki≈üisel anƒ± alb√ºm√ºn</strong> olur. Fotoƒüraflar sadece burada,
          bu cihazda kalƒ±r.
        </p>
        <p class="note">
          A≈üaƒüƒ±dan yeni fotoƒüraf ekleyebilir veya mevcut anƒ±larƒ±nƒ± tam ekran
          slayt g√∂sterisiyle izleyebilirsin.
        </p>

        <div class="btn-row">
          <!-- Fotoƒüraf ekleme + y√∂netim g√∂r√ºn√ºm√ºne ge√ß -->
          <label class="btn btn-primary" for="fileInput" onclick="setView('manage')">
            <span class="btn-emoji">üì∏</span>
            <span>Fotoƒüraf Ekle</span>
          </label>

          <button class="btn btn-secondary" type="button" onclick="openSlideshow(0)">
            üéûÔ∏è Anƒ±larƒ± Canlandƒ±r
          </button>
        </div>

      </div>
    </section>

    <!-- 2) ALB√úM√ú Y√ñNET -->
    <section id="view-manage" class="view">
      <div class="card">
        <button class="btn btn-ghost" type="button" onclick="setView('home')">
          ‚Üê Ana sayfaya d√∂n
        </button>

        <h1>Alb√ºm√º Y√∂net</h1>
        <p class="subtitle">
          Fotoƒüraf ekleyebilir, silebilir ve alb√ºm√ºn√º dilediƒüin zaman
          g√ºncelleyebilirsin.
        </p>
        <p class="note">
          Fotoƒüraflar bu cihazƒ±n hafƒ±zasƒ±nda, sadece bu magnet i√ßin saklanƒ±r.
        </p>

        <div class="btn-row">
          <label class="btn btn-primary" for="fileInput">
            <span class="btn-emoji">üì∏</span>
            <span>Fotoƒüraf Ekle</span>
          </label>

          <button class="btn btn-secondary" type="button" onclick="clearAllPhotos()">
            üßπ Alb√ºm√º Temizle
          </button>
        </div>

        <div id="counter" class="counter"></div>

        <input id="fileInput" type="file" accept="image/*" multiple>

        <div id="photos"></div>
        <div id="emptyMsg" class="empty"></div>
      </div>
    </section>

  </div>

  <!-- 3) TAM EKRAN SLAYT G√ñSTERƒ∞Sƒ∞ -->
  <div id="slideshow" class="slideshow-overlay">
    <div class="slide-top">
      <button class="slide-btn" type="button" onclick="closeSlideshow()">
        ‚úï Kapat
      </button>
      <div class="slide-counter" id="slideCounter"></div>
    </div>

    <button class="slide-nav prev" type="button" onclick="prevSlide()">‚ùÆ</button>
    <div class="slide-img-wrap">
      <img id="slideImage" src="" alt="Anƒ± fotoƒürafƒ±">
    </div>
    <button class="slide-nav next" type="button" onclick="nextSlide()">‚ùØ</button>
  </div>

  <script>
    const ALBUM_KEY = "hardin_samsun_album_v1";
    const MAX_PHOTOS = 20;

    let photos = JSON.parse(localStorage.getItem(ALBUM_KEY)) || [];
    let currentSlide = 0;

    function savePhotos() {
      try {
        localStorage.setItem(ALBUM_KEY, JSON.stringify(photos));
        return true;
      } catch (e) {
        alert("Alb√ºm telefon hafƒ±zasƒ±nda izin verilen sƒ±nƒ±ra ula≈ütƒ±. Yeni fotoƒüraf eklemek i√ßin √∂nce bazƒ±larƒ±nƒ± silmen gerekiyor.");
        console.error(e);
        return false;
      }
    }

    function updateCounter() {
      const counterEl = document.getElementById("counter");
      if (!counterEl) return;
      if (photos.length === 0) {
        counterEl.innerText = "";
      } else if (photos.length === 1) {
        counterEl.innerText = "Alb√ºm√ºnde 1 fotoƒüraf var.";
      } else {
        counterEl.innerText = "Alb√ºm√ºnde " + photos.length + " fotoƒüraf var.";
      }
    }

    function render() {
      const container = document.getElementById("photos");
      const empty = document.getElementById("emptyMsg");
      if (!container || !empty) return;

      container.innerHTML = "";

      if (photos.length === 0) {
        empty.innerText = "Hen√ºz fotoƒüraf eklenmedi. Ba≈ülamak i√ßin yukarƒ±daki butona dokun.";
      } else {
        empty.innerText = "";
      }

      photos.forEach((src, index) => {
        const div = document.createElement("div");
        div.className = "photo";

        const img = document.createElement("img");
        img.src = src;
        img.onclick = () => openSlideshow(index);

        const del = document.createElement("div");
        del.className = "delete";
        del.innerText = "√ó";
        del.onclick = (e) => {
          e.stopPropagation();
          photos.splice(index, 1);
          savePhotos();
          render();
          updateCounter();
        };

        div.appendChild(img);
        div.appendChild(del);
        container.appendChild(div);
      });

      updateCounter();
    }

    function setView(view) {
      const home = document.getElementById("view-home");
      const manage = document.getElementById("view-manage");
      if (!home || !manage) return;

      if (view === "home") {
        home.classList.add("active");
        manage.classList.remove("active");
      } else {
        home.classList.remove("active");
        manage.classList.add("active");
      }
    }

    // Fotoƒürafƒ± k√º√ß√ºlt√ºp ekle
    function addFileCompressed(file) {
      if (photos.length >= MAX_PHOTOS) {
        alert("Bu alb√ºm en fazla " + MAX_PHOTOS + " fotoƒüraf saklayabilir. Yeni fotoƒüraf eklemek i√ßin √∂nce bazƒ±larƒ±nƒ± sil.");
        return;
      }

      const reader = new FileReader();
      reader.onload = () => {
        const img = new Image();
        img.onload = () => {
          const maxSize = 960;
          let w = img.width;
          let h = img.height;

          const scale = Math.min(maxSize / w, maxSize / h, 1);
          w = Math.round(w * scale);
          h = Math.round(h * scale);

          const canvas = document.createElement("canvas");
          canvas.width = w;
          canvas.height = h;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(img, 0, 0, w, h);

          const dataUrl = canvas.toDataURL("image/jpeg", 0.7);

          photos.push(dataUrl);
          if (!savePhotos()) {
            photos.pop();
          }
          render();
        };
        img.src = reader.result;
      };
      reader.readAsDataURL(file);
    }

    const fileInput = document.getElementById("fileInput");
    if (fileInput) {
      fileInput.addEventListener("change", function() {
        const files = Array.from(this.files);
        files.forEach(file => addFileCompressed(file));
        this.value = "";
      });
    }

    function clearAllPhotos() {
      if (!photos.length) return;
      const ok = confirm("T√ºm fotoƒüraflarƒ± silmek istediƒüinden emin misin?");
      if (!ok) return;
      photos = [];
      savePhotos();
      render();
    }

    // SLIDESHOW
    function openSlideshow(startIndex) {
      if (!photos.length) {
        alert("Hen√ºz fotoƒüraf eklenmedi. √ñnce alb√ºme birka√ß fotoƒüraf ekle.");
        return;
      }
      if (startIndex < 0 || startIndex >= photos.length) {
        startIndex = 0;
      }
      currentSlide = startIndex;
      const overlay = document.getElementById("slideshow");
      if (!overlay) return;
      overlay.classList.add("active");
      updateSlideImage();
    }

    function closeSlideshow() {
      const overlay = document.getElementById("slideshow");
      if (!overlay) return;
      overlay.classList.remove("active");
    }

    function updateSlideImage() {
      const img = document.getElementById("slideImage");
      const counter = document.getElementById("slideCounter");
      if (!img || !counter || photos.length === 0) return;
      currentSlide = (currentSlide + photos.length) % photos.length;
      img.src = photos[currentSlide];
      counter.innerText = (currentSlide + 1) + " / " + photos.length;
    }

    function nextSlide() {
      if (!photos.length) return;
      currentSlide = (currentSlide + 1) % photos.length;
      updateSlideImage();
    }

    function prevSlide() {
      if (!photos.length) return;
      currentSlide = (currentSlide - 1 + photos.length) % photos.length;
      updateSlideImage();
    }

    // Ba≈ülangƒ±√ßta her ≈üey
    render();
  </script>
</body>
</html>

