<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>HARDIN â€¢ Masa</title>

  <style>
    :root{
      --bg:#070708;
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --muted2:rgba(255,255,255,.38);
      --shadow:0 18px 60px rgba(0,0,0,.62);
      --r2:24px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    *{ box-sizing:border-box; }
    html, body { height:100%; }
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:
        radial-gradient(1000px 700px at 50% -20%, rgba(255,255,255,.07), transparent 60%),
        radial-gradient(900px 700px at 10% 120%, rgba(255,255,255,.06), transparent 55%),
        var(--bg);
      overflow-x:hidden;
      -webkit-tap-highlight-color: transparent;
    }

    /* iOS input focus zoom fix */
    input{ font-size:16px; }

    /* double tap / gesture zoom engelle */
    button, a, .tap { touch-action: manipulation; -webkit-user-select:none; user-select:none; }

    .topbar{
      position:sticky; top:0; z-index:10;
      padding:16px 16px 12px;
      backdrop-filter: blur(10px);
      background:linear-gradient(to bottom, rgba(0,0,0,.62), rgba(0,0,0,.05));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .brand{
      text-align:center;
      letter-spacing:.22em;
      font-weight:900;
      font-size:14px;
      opacity:.96;
    }

    .wrap{
      max-width:520px;
      margin:0 auto;
      padding:14px 14px 26px;
    }

    .view{ display:none; }
    .view.active{ display:block; }

    .hero{
      padding:8px 6px 14px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
      letter-spacing:.04em;
    }

    /* Big buttons */
    .biggrid{ display:grid; gap:12px; }
    .bigbtn{
      position:relative;
      border-radius:var(--r2);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      min-height:132px;
      box-shadow:var(--shadow);
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease;
    }
    .bigbtn:active{ transform:scale(.99); border-color:rgba(255,255,255,.18); }

    .photo{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(10px);
      transform: scale(1.2);
      opacity:.95;
    }
    .overlay{
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(0,0,0,.52), rgba(0,0,0,.80));
    }
    .bigcontent{
      position:relative;
      display:flex;
      height:100%;
      align-items:center;
      justify-content:space-between;
      padding:18px 18px;
      gap:12px;
    }
    .bigtitle{
      font-size:18px;
      font-weight:780;
      letter-spacing:.01em;
      line-height:1.15;
      max-width:78%;
    }
    .bigicon{
      font-size:22px;
      opacity:.90;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      padding:10px 12px;
      border-radius:16px;
    }

    /* Footer links */
    .footerlinks{
      display:flex;
      gap:14px;
      justify-content:center;
      padding:16px 4px 0;
      color:var(--muted2);
      font-size:12px;
    }
    .footerlinks button{
      background:transparent;
      border:none;
      color:var(--muted2);
      padding:6px 4px;
      cursor:pointer;
      text-decoration: underline;
      text-underline-offset: 6px;
      text-decoration-color: rgba(255,255,255,.18);
    }

    /* Sub top */
    .subtop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:8px 2px 14px;
    }
    .closebtn{
      width:40px; height:40px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      font-size:18px;
    }
    .subhint{
      text-align:center;
      flex:1;
      color:var(--muted);
      font-size:13px;
      letter-spacing:.03em;
      padding-right:40px;
    }

    /* Panels */
    .panel{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      border-radius:var(--r2);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .section{ padding:14px; }
    .section h3{
      margin:0 0 10px;
      font-size:13px;
      color:var(--muted);
      font-weight:900;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .divider{ height:1px; background:rgba(255,255,255,.08); }

    .action{ display:flex; gap:10px; flex-wrap:wrap; }
    .btn{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:12px 12px;
      border-radius:16px;
      cursor:pointer;
      font-weight:880;
      letter-spacing:.01em;
      transition: transform .12s ease, border-color .12s ease;
    }
    .btn:active{ transform:scale(.99); border-color:rgba(255,255,255,.18); }
    .btn.primary{ background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.14); }
    .btn.flex{ flex:1; min-width:140px; }

    /* Mood grid */
    .moodgrid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .mood{
      position:relative;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      padding:14px 12px;
      cursor:pointer;
    }
    .mood .mphoto{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(12px);
      transform: scale(1.2);
      opacity:.50;
    }
    .mood .moverlay{
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(0,0,0,.65), rgba(0,0,0,.84));
    }
    .mood .t{ position:relative; font-weight:920; font-size:13px; }
    .mood .s{ position:relative; margin-top:6px; font-size:12px; color:var(--muted2); }

    /* Search */
    .searchRow{ display:flex; gap:10px; align-items:center; }
    .inp{
      flex:1;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      color:var(--text);
      padding:12px 12px;
      border-radius:16px;
      outline:none;
      font-size:16px;
    }
    .inp::placeholder{ color:rgba(255,255,255,.35); }

    /* CARD pages */
    .cardPage{
      min-height: calc(100vh - 58px - 28px);
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .flipArea{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .flip{
      width:100%;
      max-width:520px;
      perspective:1200px;
    }

    /* daha kÃ¼Ã§Ã¼k + ortalÄ±: tÃ¼m cihazlarda taÅŸma ihtimali azalÄ±r */
    .flipInner{
      position:relative;
      width:100%;
      height: min(58vh, 520px);
      border-radius: 26px;
      transform-style: preserve-3d;
      transition: transform .55s cubic-bezier(.2,.8,.2,1);
      box-shadow: var(--shadow);
    }
    @media (max-height: 740px){
      .flipInner{ height: min(52vh, 460px); }
    }

    .flip.open .flipInner{ transform: rotateY(180deg); }

    .face{
      position:absolute; inset:0;
      border-radius:26px;
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
      backface-visibility:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:18px 16px;
    }
    .cphoto{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(14px);
      transform: scale(1.25);
      opacity:.82;
    }
    .cover{
      position:absolute; inset:0;
      background:
        radial-gradient(900px 380px at 25% 20%, rgba(255,255,255,.10), transparent 60%),
        radial-gradient(700px 320px at 80% 85%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.56), rgba(0,0,0,.84));
    }

    .front .mark{
      position:relative;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }
    .front .h{ letter-spacing:.22em; font-weight:950; font-size:13px; opacity:.92; }
    .front .openHint{ font-weight:950; font-size:18px; opacity:.96; }
    .front .tiny{ color:var(--muted); font-size:12px; letter-spacing:.02em; }

    .back{ transform: rotateY(180deg); }

    .backContent{
      position:relative;
      width:100%;
      height:100%;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:12px;
      padding: 6px 2px;
    }

    .bigText{
      display:flex;
      flex:1;
      align-items:center;
      justify-content:center;
      padding: 0 6px;
    }
    .bigText p{
      margin:0;
      font-size:20px;
      line-height:1.35;
      font-weight:920;
      letter-spacing:.01em;
    }
    @media (max-height: 740px){
      .bigText p{ font-size:18px; }
    }

    .navRow{
      display:grid;
      grid-template-columns: 1fr 1.3fr 1fr;
      gap:10px;
      padding: 0 2px;
    }
    .navbtn{
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      padding:12px 10px;
      color:var(--text);
      cursor:pointer;
      font-weight:920;
    }
    .navbtn.center{ background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.14); }

    /* Chat target: initially hidden, shown after click */
    .targetWrap{
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      height: 0;
      opacity: 0;
      transform: translateY(6px);
      transition: height .22s ease, opacity .22s ease, transform .22s ease;
    }
    .targetWrap.show{
      height: 210px;
      opacity: 1;
      transform: translateY(0);
    }

    .bigArrowBox{
      width:210px; height:210px;
      border-radius: 30px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      box-shadow: 0 16px 44px rgba(0,0,0,.55);
      position:relative;
      overflow:hidden;
    }
    .bigArrowBg{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(14px);
      transform: scale(1.3);
      opacity:.55;
    }
    .bigArrowOverlay{
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.78));
    }
    .bigArrow{
      position:absolute;
      top:50%; left:50%;
      width:0; height:0;
      border-left: 24px solid transparent;
      border-right:24px solid transparent;
      border-bottom: 48px solid rgba(255,255,255,.95);
      /* merkezde ve taÅŸmadan dÃ¶nÃ¼ÅŸ */
      transform-origin: 50% 110px;
      transform: translate(-50%,-110px) rotate(0deg);
      transition: transform 1.35s cubic-bezier(.15,.9,.2,1);
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.7));
    }

    /* Modal */
    .modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.62);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:30;
    }
    .modal.show{ display:flex; }
    .modalbox{
      max-width:520px;
      width:100%;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(15,15,16,.92);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .modalhead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:14px 14px;
      border-bottom:1px solid rgba(255,255,255,.08);
      color:var(--muted);
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:12px;
      font-weight:950;
    }
    .modalbody{ padding:14px; color:var(--text); }
    .modalbody p{ margin:0 0 10px; color:var(--muted); line-height:1.45; }
    .smallbtn{
      width:40px; height:40px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      font-size:18px;
    }
  </style>
</head>

<body>
  <div class="topbar"><div class="brand">HARDIN</div></div>

  <div class="wrap">
    <!-- HOME -->
    <section id="homeView" class="view active">
      <div class="hero">Bu masa iÃ§in bir ÅŸey seÃ§.</div>

      <div class="biggrid">
        <div class="bigbtn tap" id="openMusic">
          <div class="photo" style="background-image:url('https://source.unsplash.com/featured/?dark,bar,interior');"></div>
          <div class="overlay"></div>
          <div class="bigcontent">
            <div class="bigtitle">Bu Masaya Bir ÅžarkÄ± AÃ§</div>
            <div class="bigicon">ðŸŽµ</div>
          </div>
        </div>

        <div class="bigbtn tap" id="openQuote">
          <div class="photo" style="background-image:url('https://source.unsplash.com/featured/?dark,table,moody');"></div>
          <div class="overlay"></div>
          <div class="bigcontent">
            <div class="bigtitle">Bu Masaya Bir SÃ¶z BÄ±rak</div>
            <div class="bigicon">ðŸ’¬</div>
          </div>
        </div>

        <div class="bigbtn tap" id="openChat">
          <div class="photo" style="background-image:url('https://source.unsplash.com/featured/?dark,conversation,silhouette');"></div>
          <div class="overlay"></div>
          <div class="bigcontent">
            <div class="bigtitle">RakÄ± Bahane, Sohbet Åžahane</div>
            <div class="bigicon">ðŸ¥ƒ</div>
          </div>
        </div>
      </div>

      <div class="footerlinks">
        <button id="aboutBtn">HakkÄ±nda</button>
        <button id="contactBtn">Ä°letiÅŸim</button>
        <button id="feedbackBtn">Talep &amp; Åžikayet</button>
      </div>
    </section>

    <!-- MUSIC -->
    <section id="musicView" class="view">
      <div class="subtop">
        <button class="closebtn tap" id="closeMusic" aria-label="Kapat">âœ•</button>
        <div class="subhint">Bu masa iÃ§in bir mÃ¼zik seÃ§.</div>
      </div>

      <div class="panel">
        <div class="section">
          <h3>Rastgele</h3>
          <div class="action">
            <button class="btn primary flex tap" id="randomPlay">ðŸŽ² Rastgele Ã‡al</button>
          </div>
        </div>

        <div class="divider"></div>

        <div class="section">
          <h3>Moduna gÃ¶re seÃ§</h3>
          <div class="moodgrid" id="moodGrid"></div>
        </div>

        <div class="divider"></div>

        <div class="section">
          <h3>Ä°stediÄŸin ÅŸarkÄ±yÄ± yaz</h3>
          <div class="searchRow">
            <input id="songInput" class="inp" placeholder="ÅžarkÄ± / sanatÃ§Ä± yazâ€¦" inputmode="search" autocomplete="off" />
            <button class="btn tap" id="searchYouTube" style="min-width:120px; flex:0;">Ara</button>
          </div>
          <div style="margin-top:10px; color:var(--muted2); font-size:12px;">
            Bu alan YouTube arama sonuÃ§ sayfasÄ±nÄ± aÃ§ar.
          </div>
        </div>
      </div>
    </section>

    <!-- QUOTE -->
    <section id="quoteView" class="view">
      <div class="subtop">
        <button class="closebtn tap" id="closeQuote" aria-label="Kapat">âœ•</button>
        <div class="subhint">SÃ¶z kartÄ±.</div>
      </div>

      <div class="cardPage">
        <div class="flipArea">
          <div class="flip tap" id="quoteFlip" aria-label="Kart">
            <div class="flipInner">
              <!-- FRONT (kapalÄ±) -->
              <div class="face front">
                <div class="cphoto" id="quoteFrontPhoto"></div>
                <div class="cover"></div>
                <div class="mark">
                  <div class="h">HARDIN</div>
                  <div class="openHint">KartÄ± AÃ§</div>
                  <div class="tiny">dokun</div>
                </div>
              </div>

              <!-- BACK (aÃ§Ä±k) -->
              <div class="face back">
                <div class="cphoto" id="quoteBackPhoto"></div>
                <div class="cover"></div>

                <div class="backContent">
                  <div class="bigText"><p id="quoteText">â€¦</p></div>
                  <div class="navRow">
                    <button class="navbtn tap" id="quotePrev">â—€ï¸Ž Geri</button>
                    <button class="navbtn center tap" id="quotePlay">ðŸŽµ MÃ¼zik Ã‡al</button>
                    <button class="navbtn tap" id="quoteNext">Sonraki â–¶ï¸Ž</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Kart dÄ±ÅŸÄ±nda buton yok -->
      </div>
    </section>

    <!-- CHAT -->
    <section id="chatView" class="view">
      <div class="subtop">
        <button class="closebtn tap" id="closeChat" aria-label="Kapat">âœ•</button>
        <div class="subhint">Sohbet kartÄ±.</div>
      </div>

      <div class="cardPage">
        <div class="flipArea">
          <div class="flip tap" id="chatFlip" aria-label="Kart">
            <div class="flipInner">
              <!-- FRONT -->
              <div class="face front">
                <div class="cphoto" id="chatFrontPhoto"></div>
                <div class="cover"></div>
                <div class="mark">
                  <div class="h">HARDIN</div>
                  <div class="openHint">KartÄ± AÃ§</div>
                  <div class="tiny">dokun</div>
                </div>
              </div>

              <!-- BACK -->
              <div class="face back">
                <div class="cphoto" id="chatBackPhoto"></div>
                <div class="cover"></div>

                <div class="backContent">
                  <div class="bigText"><p id="chatText">â€¦</p></div>

                  <!-- hedef alanÄ±: sadece tÄ±klayÄ±nca aÃ§Ä±lÄ±r -->
                  <div class="targetWrap" id="targetWrap">
                    <div class="bigArrowBox">
                      <div class="bigArrowBg" id="targetBg"></div>
                      <div class="bigArrowOverlay"></div>
                      <div class="bigArrow" id="bigArrow"></div>
                    </div>
                  </div>

                  <div class="navRow">
                    <button class="navbtn tap" id="chatPrev">â—€ï¸Ž Geri</button>
                    <button class="navbtn center tap" id="pickTarget">ðŸŽ¯ Hedef Belirle</button>
                    <button class="navbtn tap" id="chatNext">Sonraki â–¶ï¸Ž</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Kart dÄ±ÅŸÄ±nda buton yok -->
      </div>
    </section>
  </div>

  <!-- MODALS -->
  <div class="modal" id="modal">
    <div class="modalbox">
      <div class="modalhead">
        <div id="modalTitle">BaÅŸlÄ±k</div>
        <button class="smallbtn tap" id="modalClose">âœ•</button>
      </div>
      <div class="modalbody" id="modalBody"></div>
    </div>
  </div>

  <script>
    // ===== iOS zoom / double-tap zoom Ã¶nleme =====
    document.addEventListener('gesturestart', (e)=>e.preventDefault(), {passive:false});
    document.addEventListener('gesturechange', (e)=>e.preventDefault(), {passive:false});
    document.addEventListener('gestureend', (e)=>e.preventDefault(), {passive:false});

    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (e) {
      const now = Date.now();
      if (now - lastTouchEnd <= 280) e.preventDefault();
      lastTouchEnd = now;
    }, { passive:false });

    // ===== DATA =====
    // Not: Buradaki URLâ€™ler demo. Sonra sen kendi net linklerini buraya koyacaksÄ±n.

    const MOODS = [
      {
        title:"Klasik RakÄ± MasasÄ±", subtitle:"ZamansÄ±z",
        photo:"https://source.unsplash.com/featured/?dark,bar,bottles",
        // ARTIK arama deÄŸil: direkt URL listesi
        tracks:[
          { name:"Zeki MÃ¼ren â€“ Åžimdi UzaklardasÄ±n", url:"https://www.youtube.com/watch?v=y4BJtEPF6Tc" },
          { name:"MÃ¼zeyyen Senar â€“ Ben Seni Unutmak Ä°Ã§in Sevmedim", url:"https://www.youtube.com/watch?v=ra-f3IeXQqc" }
        ]
      },
      {
        title:"Biraz HÃ¼zÃ¼n", subtitle:"Ä°Ã§ Ã§ekiÅŸ",
        photo:"https://source.unsplash.com/featured/?dark,smoke,moody",
        tracks:[
          { name:"Sezen Aksu â€“ TÃ¼keneceÄŸiz", url:"https://www.youtube.com/watch?v=_d0FQHjm52c" },
          { name:"BÃ¼lent OrtaÃ§gil â€“ EylÃ¼l AkÅŸamÄ±", url:"https://www.youtube.com/watch?v=UWkCQyNEg-A" }
        ]
      },
      {
        title:"Sohbet AÃ§Ä±k", subtitle:"GÃ¼lÃ¼ÅŸ",
        photo:"https://source.unsplash.com/featured/?dark,friends,night",
        tracks:[
          { name:"BÃ¼lent OrtaÃ§gil & Teoman â€“ EylÃ¼l AkÅŸamÄ±", url:"https://www.youtube.com/watch?v=5sJOe0hhqM4" },
          { name:"Sezen Aksu â€“ TÃ¼keneceÄŸiz (Official Audio)", url:"https://www.youtube.com/watch?v=Eg6gKLXA30U" }
        ]
      },
      {
        title:"Nostalji", subtitle:"Eskimez",
        photo:"https://source.unsplash.com/featured/?dark,retro,vinyl",
        tracks:[
          { name:"(Demo) YouTube", url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ" },
          { name:"(Demo) YouTube", url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ" }
        ]
      }
    ];

    // SÃ¶z kartlarÄ±: tek ÅŸarkÄ± -> ARTIK direkt link
    const QUOTE_CARDS = [
      {
        text:"Bu masa sessiz deÄŸil; sadece derin.",
        songUrl:"https://www.youtube.com/watch?v=y4BJtEPF6Tc",
        frontPhoto:"https://source.unsplash.com/featured/?dark,raki,table",
        backPhoto:"https://source.unsplash.com/featured/?dark,glass,candle"
      },
      {
        text:"Bir ÅŸarkÄ± aÃ§Ä±lÄ±râ€¦ konuÅŸacak yer bulunur.",
        songUrl:"https://www.youtube.com/watch?v=_d0FQHjm52c",
        frontPhoto:"https://source.unsplash.com/featured/?dark,night,city",
        backPhoto:"https://source.unsplash.com/featured/?dark,street,light"
      },
      {
        text:"Kadeh doluysa deÄŸil; niyet doluysa gÃ¼zeldir.",
        songUrl:"https://www.youtube.com/watch?v=ra-f3IeXQqc",
        frontPhoto:"https://source.unsplash.com/featured/?dark,wood,texture",
        backPhoto:"https://source.unsplash.com/featured/?dark,glass,reflection"
      },
      {
        text:"Bu masada acele yok. ÅžarkÄ± bitmeden kalkÄ±lmaz.",
        songUrl:"https://www.youtube.com/watch?v=UWkCQyNEg-A",
        frontPhoto:"https://source.unsplash.com/featured/?dark,bar,shadow",
        backPhoto:"https://source.unsplash.com/featured/?dark,table,moody"
      }
    ];

    // Sohbet kartlarÄ±
    const CHAT_CARDS = [
      {
        q:"Bu masada herkes bir ÅŸey anlatsaâ€¦ sen ne anlatÄ±rdÄ±n?",
        frontPhoto:"https://source.unsplash.com/featured/?dark,table,wood",
        backPhoto:"https://source.unsplash.com/featured/?dark,people,conversation",
        targetBg:"https://source.unsplash.com/featured/?dark,texture,grain"
      },
      {
        q:"Seni en Ã§ok hangi ÅŸarkÄ± â€˜aynÄ± masayaâ€™ geri gÃ¶tÃ¼rÃ¼r?",
        frontPhoto:"https://source.unsplash.com/featured/?dark,glass,ice",
        backPhoto:"https://source.unsplash.com/featured/?dark,bar,interior",
        targetBg:"https://source.unsplash.com/featured/?dark,black,marble"
      },
      {
        q:"BugÃ¼n bu masanÄ±n adÄ± ne olsun? (Tek kelime.)",
        frontPhoto:"https://source.unsplash.com/featured/?dark,shadow,film",
        backPhoto:"https://source.unsplash.com/featured/?dark,night,neon",
        targetBg:"https://source.unsplash.com/featured/?dark,texture,carbon"
      }
    ];

    // ===== HELPERS =====
    const $ = (id) => document.getElementById(id);
    function showView(viewId){
      ["homeView","musicView","quoteView","chatView"].forEach(v => $(v).classList.remove("active"));
      $(viewId).classList.add("active");
      window.scrollTo({top:0, behavior:"instant"});
    }
    function openUrl(url){
      window.open(url, "_blank", "noopener,noreferrer");
    }
    function openYouTubeSearch(query){
      const q = encodeURIComponent((query||"").trim());
      const url = "https://www.youtube.com/results?search_query=" + q;
      window.open(url, "_blank", "noopener,noreferrer");
    }
    function pickRandom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    // ===== HOME NAV =====
    $("openMusic").onclick = () => showView("musicView");
    $("openQuote").onclick = () => { drawQuote(true); showView("quoteView"); };
    $("openChat").onclick  = () => { drawChat(true); showView("chatView"); };
    $("closeMusic").onclick = () => showView("homeView");
    $("closeQuote").onclick = () => showView("homeView");
    $("closeChat").onclick  = () => showView("homeView");

    // ===== MUSIC =====
    const moodGrid = $("moodGrid");
    MOODS.forEach(m=>{
      const el = document.createElement("div");
      el.className = "mood tap";
      el.innerHTML = `
        <div class="mphoto" style="background-image:url('${m.photo}')"></div>
        <div class="moverlay"></div>
        <div class="t">${m.title}</div>
        <div class="s">${m.subtitle}</div>
      `;
      el.onclick = ()=>{
        const t = pickRandom(m.tracks);
        openUrl(t.url);            // âœ… direkt link
      };
      moodGrid.appendChild(el);
    });

    // Rastgele: tÃ¼m mood track havuzundan direkt link
    $("randomPlay").onclick = ()=>{
      const all = MOODS.flatMap(m=>m.tracks);
      openUrl(pickRandom(all).url); // âœ… direkt link
    };

    // Sadece bu alan arama sonuÃ§ aÃ§ar
    $("searchYouTube").onclick = ()=>{
      const val = $("songInput").value || "";
      if(!val.trim()){ $("songInput").focus(); return; }
      openYouTubeSearch(val);       // âœ… arama
    };
    $("songInput").addEventListener("keydown",(e)=>{
      if(e.key==="Enter") $("searchYouTube").click();
    });

    // ===== QUOTE (flip; tekrar basÄ±nca kapanmasÄ±n) =====
    let quoteIndex = 0;
    const quoteFlip = $("quoteFlip");
    const quoteFrontPhoto = $("quoteFrontPhoto");
    const quoteBackPhoto  = $("quoteBackPhoto");
    const quoteText = $("quoteText");

    function setQuote(i){
      const c = QUOTE_CARDS[i];
      quoteText.textContent = c.text;
      quoteFrontPhoto.style.backgroundImage = `url('${c.frontPhoto}')`;
      quoteBackPhoto.style.backgroundImage  = `url('${c.backPhoto}')`;
      quoteFlip.classList.remove("open");
      // yeni karta geÃ§ince tekrar aÃ§Ä±lmasÄ± iÃ§in izin ver
      quoteFlip.dataset.locked = "0";
    }
    function drawQuote(randomPick=false){
      quoteIndex = randomPick ? Math.floor(Math.random()*QUOTE_CARDS.length) : quoteIndex;
      setQuote(quoteIndex);
    }

    // sadece aÃ§: kapatma yok
    quoteFlip.addEventListener("click", ()=>{
      if(quoteFlip.classList.contains("open")) return; // kapatma yok
      quoteFlip.classList.add("open");
      quoteFlip.dataset.locked = "1";
    });

    $("quotePrev").onclick = (e)=>{
      e.stopPropagation();
      quoteIndex = (quoteIndex - 1 + QUOTE_CARDS.length) % QUOTE_CARDS.length;
      setQuote(quoteIndex);
    };
    $("quoteNext").onclick = (e)=>{
      e.stopPropagation();
      quoteIndex = (quoteIndex + 1) % QUOTE_CARDS.length;
      setQuote(quoteIndex);
    };
    $("quotePlay").onclick = (e)=>{
      e.stopPropagation();
      openUrl(QUOTE_CARDS[quoteIndex].songUrl); // âœ… direkt link
    };

    // ===== CHAT (flip; hedef alanÄ± sadece tÄ±klayÄ±nca aÃ§Ä±lÄ±r) =====
    let chatIndex = 0;
    const chatFlip = $("chatFlip");
    const chatFrontPhoto = $("chatFrontPhoto");
    const chatBackPhoto  = $("chatBackPhoto");
    const chatText = $("chatText");
    const bigArrow = $("bigArrow");
    const targetWrap = $("targetWrap");
    const targetBg = $("targetBg");

    function setChat(i){
      const c = CHAT_CARDS[i];
      chatText.textContent = c.q;
      chatFrontPhoto.style.backgroundImage = `url('${c.frontPhoto}')`;
      chatBackPhoto.style.backgroundImage  = `url('${c.backPhoto}')`;
      targetBg.style.backgroundImage       = `url('${c.targetBg}')`;

      chatFlip.classList.remove("open");
      chatFlip.dataset.locked = "0";

      // hedef alanÄ± kapalÄ± gelsin
      targetWrap.classList.remove("show");
      bigArrow.style.transform = `translate(-50%,-110px) rotate(0deg)`;
    }
    function drawChat(randomPick=false){
      chatIndex = randomPick ? Math.floor(Math.random()*CHAT_CARDS.length) : chatIndex;
      setChat(chatIndex);
    }

    chatFlip.addEventListener("click", ()=>{
      if(chatFlip.classList.contains("open")) return; // kapatma yok
      chatFlip.classList.add("open");
      chatFlip.dataset.locked = "1";
    });

    $("chatPrev").onclick = (e)=>{
      e.stopPropagation();
      chatIndex = (chatIndex - 1 + CHAT_CARDS.length) % CHAT_CARDS.length;
      setChat(chatIndex);
    };
    $("chatNext").onclick = (e)=>{
      e.stopPropagation();
      chatIndex = (chatIndex + 1) % CHAT_CARDS.length;
      setChat(chatIndex);
    };

    // ===== Tick sound (WebAudio) =====
    let audioCtx = null;
    function ensureAudio(){
      if(audioCtx) return;
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }
    function tick(atTime){
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = "square";
      o.frequency.setValueAtTime(220, atTime);
      g.gain.setValueAtTime(0.0001, atTime);
      g.gain.exponentialRampToValueAtTime(0.08, atTime + 0.005);
      g.gain.exponentialRampToValueAtTime(0.0001, atTime + 0.03);
      o.connect(g); g.connect(audioCtx.destination);
      o.start(atTime);
      o.stop(atTime + 0.04);
    }
    function playTicks(durationMs){
      ensureAudio();
      const start = audioCtx.currentTime + 0.02;
      const ticks = Math.max(10, Math.floor(durationMs / 90));
      for(let i=0;i<ticks;i++){
        const t = start + (i*(durationMs/1000))/ticks;
        tick(t);
      }
    }

    // hedef belirle: Ã¶nce alanÄ± aÃ§, sonra dÃ¶n + tÄ±k tÄ±k
    let spinLock=false;
    $("pickTarget").onclick = (e)=>{
      e.stopPropagation();
      if(spinLock) return;
      spinLock=true;

      // alanÄ± aÃ§
      targetWrap.classList.add("show");

      // dÃ¶nme
      const duration = 1350;
      const turns = 4 + Math.random()*3;
      const deg = turns*360 + Math.floor(Math.random()*360);

      // ses (kullanÄ±cÄ± etkileÅŸimi olduÄŸu iÃ§in Ã§alÄ±ÅŸÄ±r)
      playTicks(duration);

      // animasyon
      bigArrow.style.transform = `translate(-50%,-110px) rotate(${deg}deg)`;

      setTimeout(()=> spinLock=false, duration + 50);
    };

    // ===== FOOTER MODALS =====
    const modal = $("modal");
    const modalTitle = $("modalTitle");
    const modalBody  = $("modalBody");
    function openModal(title, html){
      modalTitle.textContent = title;
      modalBody.innerHTML = html;
      modal.classList.add("show");
    }
    function closeModal(){ modal.classList.remove("show"); }

    $("aboutBtn").onclick = ()=> openModal("HakkÄ±nda", `
      <p>HARDIN masa setleri, kÃ¼Ã§Ã¼k bir dokunuÅŸla masaya anlam katar.</p>
      <p>ÃœÃ§ buton: <b>ÅžarkÄ±</b>, <b>SÃ¶z</b>, <b>Sohbet</b>.</p>
    `);
    $("contactBtn").onclick = ()=> openModal("Ä°letiÅŸim", `
      <p>Instagram: <b>@hardin</b> (Ã¶rnek)</p>
      <p>E-posta: <b>info@hardin.com</b> (Ã¶rnek)</p>
    `);
    $("feedbackBtn").onclick = ()=> openModal("Talep & Åžikayet", `
      <p>KÄ±sa notunu yaz, bize ulaÅŸsÄ±n. (demo)</p>
      <div style="display:flex; gap:10px; flex-direction:column;">
        <input class="inp" placeholder="MesajÄ±nâ€¦" />
        <button class="btn primary tap" onclick="alert('AlÄ±ndÄ± âœ… (demo)')">GÃ¶nder</button>
      </div>
    `);
    $("modalClose").onclick = closeModal;
    modal.addEventListener("click", (e)=>{ if(e.target===modal) closeModal(); });

  </script>
</body>
</html>
