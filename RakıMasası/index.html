<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <!-- iOS zoom engelleme -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>HARDIN ‚Ä¢ Masa</title>

  <style>
    :root{
      --bg:#070708;
      --panel:rgba(255,255,255,.06);
      --panel2:rgba(255,255,255,.08);
      --line:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --muted2:rgba(255,255,255,.40);
      --shadow:0 18px 60px rgba(0,0,0,.62);
      --r:18px;
      --r2:24px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    *{ box-sizing:border-box; }
    html, body { height:100%; }
    body{
      margin:0;
      font-family:var(--font);
      background:
        radial-gradient(1000px 700px at 50% -20%, rgba(255,255,255,.07), transparent 60%),
        radial-gradient(900px 700px at 10% 120%, rgba(255,255,255,.06), transparent 55%),
        var(--bg);
      color:var(--text);
      overflow-x:hidden;
      -webkit-tap-highlight-color: transparent;
    }

    /* iOS double-tap/gesture zoom √∂nleyiciler */
    button, a, .bigbtn, .mood, .navbtn, .closebtn, .smallbtn {
      touch-action: manipulation;
      -webkit-user-select: none;
      user-select: none;
    }
    input { font-size:16px; } /* iOS input focus zoom fix */

    .topbar{
      position:sticky; top:0;
      padding:16px 16px 12px;
      backdrop-filter: blur(10px);
      background:linear-gradient(to bottom, rgba(0,0,0,.62), rgba(0,0,0,.05));
      border-bottom:1px solid rgba(255,255,255,.06);
      z-index:10;
    }
    .brand{
      text-align:center;
      letter-spacing:.22em;
      font-weight:700;
      font-size:14px;
      opacity:.96;
    }

    .wrap{
      max-width:520px;
      margin:0 auto;
      padding:14px 14px 26px;
    }

    .view{ display:none; }
    .view.active{ display:block; }

    .hero{
      padding:8px 6px 14px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
      letter-spacing:.04em;
    }

    .biggrid{ display:grid; gap:12px; }

    .bigbtn{
      position:relative;
      border-radius:var(--r2);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      min-height:130px;
      box-shadow:var(--shadow);
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease;
    }
    .bigbtn:active{ transform:scale(.99); border-color:rgba(255,255,255,.18); }

    /* ger√ßek foto ‚Äúhissi‚Äù i√ßin: unsplash source (sen sonra deƒüi≈ütirirsin) */
    .photo{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(10px);
      transform: scale(1.18);
      opacity:.95;
    }
    .overlay{
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(0,0,0,.50), rgba(0,0,0,.78));
    }

    .bigcontent{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:18px 18px;
      gap:12px;
      height:100%;
    }
    .bigtitle{
      font-size:18px;
      font-weight:650;
      letter-spacing:.01em;
      line-height:1.15;
      max-width:78%;
    }
    .bigicon{
      font-size:22px;
      opacity:.90;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      padding:10px 12px;
      border-radius:16px;
    }

    .footerlinks{
      display:flex;
      gap:14px;
      justify-content:center;
      padding:16px 4px 0;
      color:var(--muted2);
      font-size:12px;
    }
    .footerlinks button{
      background:transparent;
      border:none;
      color:var(--muted2);
      padding:6px 4px;
      cursor:pointer;
      text-decoration: underline;
      text-underline-offset: 6px;
      text-decoration-color: rgba(255,255,255,.18);
    }

    .subtop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:8px 2px 14px;
    }
    .closebtn{
      width:40px; height:40px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      font-size:18px;
    }
    .subhint{
      text-align:center;
      flex:1;
      color:var(--muted);
      font-size:13px;
      letter-spacing:.03em;
      padding-right:40px;
    }

    .panel{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      border-radius:var(--r2);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .section{ padding:14px; }
    .section h3{
      margin:0 0 10px;
      font-size:13px;
      color:var(--muted);
      font-weight:650;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .divider{ height:1px; background:rgba(255,255,255,.08); }

    .btn{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:12px 12px;
      border-radius:16px;
      cursor:pointer;
      font-weight:650;
      letter-spacing:.01em;
      transition: transform .12s ease, border-color .12s ease;
    }
    .btn:active{ transform:scale(.99); border-color:rgba(255,255,255,.18); }
    .btn.primary{ background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.14); }

    .action{ display:flex; gap:10px; flex-wrap:wrap; }
    .btn.flex{ flex:1; min-width:140px; }

    .moodgrid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .mood{
      position:relative;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      padding:14px 12px;
      cursor:pointer;
    }
    .mood .t{ font-weight:700; font-size:13px; position:relative; }
    .mood .s{ margin-top:6px; font-size:12px; color:var(--muted2); position:relative; }
    .mood .mphoto{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(12px);
      transform: scale(1.2);
      opacity:.45;
    }
    .mood .moverlay{
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(0,0,0,.65), rgba(0,0,0,.82));
    }

    .searchRow{ display:flex; gap:10px; align-items:center; }
    .inp{
      flex:1;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      color:var(--text);
      padding:12px 12px;
      border-radius:16px;
      outline:none;
      font-size:16px; /* iOS zoom fix */
    }
    .inp::placeholder{ color:rgba(255,255,255,.35); }

    /* CARD PAGES: tam ekran g√∂r√ºn√ºm + altta kontrol */
    .cardPage{
      min-height: calc(100vh - 58px - 28px); /* topbar + wrap padding hissi */
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    /* Flip card */
    .flipArea{
      flex:1;
      display:flex;
      align-items:stretch;
      justify-content:center;
    }
    .flip{
      width:100%;
      max-width:520px;
      perspective:1200px;
    }
    .flipInner{
      position:relative;
      width:100%;
      height:100%;
      min-height: 56vh;
      border-radius: 26px;
      transform-style: preserve-3d;
      transition: transform .55s cubic-bezier(.2,.8,.2,1);
      box-shadow: var(--shadow);
    }
    .flip.open .flipInner{ transform: rotateY(180deg); }

    .face{
      position:absolute;
      inset:0;
      border-radius:26px;
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
      backface-visibility:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:22px 18px;
    }

    /* Card photo background */
    .face .cphoto{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(14px);
      transform: scale(1.25);
      opacity:.75;
    }
    .face .cover{
      position:absolute; inset:0;
      background: radial-gradient(900px 380px at 25% 20%, rgba(255,255,255,.10), transparent 60%),
                  radial-gradient(700px 320px at 80% 85%, rgba(255,255,255,.08), transparent 60%),
                  linear-gradient(180deg, rgba(0,0,0,.58), rgba(0,0,0,.82));
    }

    /* Front (kapalƒ±) */
    .front{
      background: rgba(255,255,255,.04);
    }
    .front .mark{
      position:relative;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }
    .front .h{
      letter-spacing:.22em;
      font-weight:800;
      font-size:13px;
      opacity:.92;
    }
    .front .openHint{
      font-weight:750;
      font-size:18px;
      opacity:.95;
    }
    .front .tiny{
      color:var(--muted);
      font-size:12px;
      letter-spacing:.02em;
    }

    /* Back (a√ßƒ±k) */
    .back{
      transform: rotateY(180deg);
    }
    .back p{
      position:relative;
      margin:0;
      font-size:20px;
      line-height:1.35;
      font-weight:750;
      letter-spacing:.01em;
    }

    .navRow{
      display:grid;
      grid-template-columns: 1fr 1.3fr 1fr;
      gap:10px;
    }
    .navbtn{
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      padding:12px 10px;
      color:var(--text);
      cursor:pointer;
      font-weight:750;
    }
    .navbtn.center{
      background:rgba(255,255,255,.08);
      border-color:rgba(255,255,255,.14);
    }

    /* CHAT: hedef belirleme spinner */
    .targetBox{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      border-radius: 22px;
      box-shadow: var(--shadow);
      padding: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .wheelWrap{
      position:relative;
      width:74px; height:74px;
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      overflow:hidden;
      flex:0 0 auto;
      display:flex; align-items:center; justify-content:center;
    }
    .arrow{
      width:0; height:0;
      border-left: 10px solid transparent;
      border-right:10px solid transparent;
      border-bottom: 18px solid rgba(255,255,255,.92);
      transform-origin: 50% 54px;
      transform: rotate(0deg);
      transition: transform 1.2s cubic-bezier(.15,.9,.2,1);
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.7));
    }
    .targetText{
      flex:1;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.3;
    }
    .targetName{
      color: var(--text);
      font-weight: 800;
      letter-spacing: .01em;
    }

    /* Modal */
    .modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.62);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:30;
    }
    .modal.show{ display:flex; }
    .modalbox{
      max-width:520px;
      width:100%;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(15,15,16,.92);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .modalhead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:14px 14px;
      border-bottom:1px solid rgba(255,255,255,.08);
      color:var(--muted);
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:12px;
      font-weight:750;
    }
    .modalbody{ padding:14px; color:var(--text); }
    .modalbody p{ margin:0 0 10px; color:var(--muted); line-height:1.45; }
    .smallbtn{
      width:40px; height:40px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      font-size:18px;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="brand">HARDIN</div>
  </div>

  <div class="wrap">
    <!-- HOME -->
    <section id="homeView" class="view active">
      <div class="hero">Bu masa i√ßin bir ≈üey se√ß.</div>

      <div class="biggrid">
        <div class="bigbtn" id="openMusic">
          <div class="photo" style="background-image:url('https://source.unsplash.com/featured/?dark,bar,interior');"></div>
          <div class="overlay"></div>
          <div class="bigcontent">
            <div class="bigtitle">Bu Masaya Bir ≈ûarkƒ± A√ß</div>
            <div class="bigicon">üéµ</div>
          </div>
        </div>

        <div class="bigbtn" id="openQuote">
          <div class="photo" style="background-image:url('https://source.unsplash.com/featured/?dark,table,moody');"></div>
          <div class="overlay"></div>
          <div class="bigcontent">
            <div class="bigtitle">Bu Masaya Bir S√∂z Bƒ±rak</div>
            <div class="bigicon">üí¨</div>
          </div>
        </div>

        <div class="bigbtn" id="openChat">
          <div class="photo" style="background-image:url('https://source.unsplash.com/featured/?dark,conversation,silhouette');"></div>
          <div class="overlay"></div>
          <div class="bigcontent">
            <div class="bigtitle">Rakƒ± Bahane, Sohbet ≈ûahane</div>
            <div class="bigicon">ü•É</div>
          </div>
        </div>
      </div>

      <div class="footerlinks">
        <button id="aboutBtn">Hakkƒ±nda</button>
        <button id="contactBtn">ƒ∞leti≈üim</button>
        <button id="feedbackBtn">Talep &amp; ≈ûikayet</button>
      </div>
    </section>

    <!-- MUSIC -->
    <section id="musicView" class="view">
      <div class="subtop">
        <button class="closebtn" id="closeMusic" aria-label="Kapat">‚úï</button>
        <div class="subhint">Bu masa i√ßin bir m√ºzik se√ß.</div>
      </div>

      <div class="panel">
        <div class="section">
          <h3>Rastgele</h3>
          <div class="action">
            <button class="btn primary flex" id="randomPlay">üé≤ Rastgele √áal</button>
          </div>
        </div>

        <div class="divider"></div>

        <div class="section">
          <h3>Moduna g√∂re se√ß</h3>
          <div class="moodgrid" id="moodGrid"></div>
        </div>

        <div class="divider"></div>

        <div class="section">
          <h3>ƒ∞stediƒüin ≈üarkƒ±yƒ± yaz</h3>
          <div class="searchRow">
            <input id="songInput" class="inp" placeholder="≈ûarkƒ± / sanat√ßƒ± yaz‚Ä¶" inputmode="search" autocomplete="off" />
            <button class="btn" id="searchYouTube" style="min-width:120px; flex:0;">Ara</button>
          </div>
          <div style="margin-top:10px; color:var(--muted2); font-size:12px;">
            Arama, YouTube sonu√ß sayfasƒ±nƒ± a√ßar.
          </div>
        </div>
      </div>
    </section>

    <!-- QUOTE (flip card + play) -->
    <section id="quoteView" class="view">
      <div class="subtop">
        <button class="closebtn" id="closeQuote" aria-label="Kapat">‚úï</button>
        <div class="subhint">S√∂z kartƒ±.</div>
      </div>

      <div class="cardPage">
        <div class="flipArea">
          <div class="flip" id="quoteFlip" aria-label="Kart">
            <div class="flipInner">
              <!-- Front (kapalƒ±) -->
              <div class="face front" id="quoteFront">
                <div class="cphoto" style="background-image:url('https://source.unsplash.com/featured/?dark,card,texture');"></div>
                <div class="cover"></div>
                <div class="mark">
                  <div class="h">HARDIN</div>
                  <div class="openHint">Kartƒ± A√ß</div>
                  <div class="tiny">dokun</div>
                </div>
              </div>
              <!-- Back (a√ßƒ±k) -->
              <div class="face back" id="quoteBack">
                <div class="cphoto" id="quoteBackPhoto"></div>
                <div class="cover"></div>
                <p id="quoteText">‚Ä¶</p>
              </div>
            </div>
          </div>
        </div>

        <div class="navRow">
          <button class="navbtn" id="quotePrev">‚óÄÔ∏é Geri</button>
          <button class="navbtn center" id="quotePlay">üéµ M√ºzik √áal</button>
          <button class="navbtn" id="quoteNext">Sonraki ‚ñ∂Ô∏é</button>
        </div>
      </div>
    </section>

    <!-- CHAT (flip card + target pick) -->
    <section id="chatView" class="view">
      <div class="subtop">
        <button class="closebtn" id="closeChat" aria-label="Kapat">‚úï</button>
        <div class="subhint">Sohbet kartƒ±.</div>
      </div>

      <div class="cardPage">
        <div class="flipArea">
          <div class="flip" id="chatFlip" aria-label="Kart">
            <div class="flipInner">
              <!-- Front -->
              <div class="face front">
                <div class="cphoto" style="background-image:url('https://source.unsplash.com/featured/?dark,wood,table');"></div>
                <div class="cover"></div>
                <div class="mark">
                  <div class="h">HARDIN</div>
                  <div class="openHint">Kartƒ± A√ß</div>
                  <div class="tiny">dokun</div>
                </div>
              </div>
              <!-- Back -->
              <div class="face back">
                <div class="cphoto" style="background-image:url('https://source.unsplash.com/featured/?dark,people,talking');"></div>
                <div class="cover"></div>
                <p id="chatText">‚Ä¶</p>
              </div>
            </div>
          </div>
        </div>

        <div class="targetBox">
          <div class="wheelWrap">
            <div class="arrow" id="arrow"></div>
          </div>
          <div class="targetText">
            <div>Bu soru ≈üu ki≈üiye gelsin:</div>
            <div class="targetName" id="targetName">‚Äî</div>
          </div>
          <button class="btn primary" id="pickTarget" style="min-width:150px;">üéØ Hedef Belirle</button>
        </div>

        <div class="navRow" style="grid-template-columns:1fr 1fr;">
          <button class="navbtn" id="chatPrev">‚óÄÔ∏é Geri</button>
          <button class="navbtn" id="chatNext">Sonraki ‚ñ∂Ô∏é</button>
        </div>
      </div>
    </section>
  </div>

  <!-- MODALS -->
  <div class="modal" id="modal">
    <div class="modalbox">
      <div class="modalhead">
        <div id="modalTitle">Ba≈ülƒ±k</div>
        <button class="smallbtn" id="modalClose">‚úï</button>
      </div>
      <div class="modalbody" id="modalBody"></div>
    </div>
  </div>

  <script>
    // ====== ZOOM / DOUBLE-TAP ENGELLEME (iOS aƒüƒ±rlƒ±klƒ±) ======
    // 1) gesture (pinch/zoom) engelle
    document.addEventListener('gesturestart', (e) => e.preventDefault(), { passive:false });
    document.addEventListener('gesturechange', (e) => e.preventDefault(), { passive:false });
    document.addEventListener('gestureend', (e) => e.preventDefault(), { passive:false });

    // 2) double-tap zoom engelle (touchend aralƒ±ƒüƒ±)
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (e) {
      const now = Date.now();
      if (now - lastTouchEnd <= 280) {
        e.preventDefault();
      }
      lastTouchEnd = now;
    }, { passive:false });

    // ====== DATA (√∂rnekler) ======
    const MOODS = [
      {
        title: "Klasik Rakƒ± Masasƒ±",
        subtitle: "Zamansƒ±z",
        photo: "https://source.unsplash.com/featured/?dark,bar,bottles",
        list: [
          "Zeki M√ºren ≈ûimdi Uzaklardasƒ±n",
          "M√ºzeyyen Senar Ben Seni Unutmak ƒ∞√ßin Sevmedim",
          "Nesrin Sipahi Veda Busesi",
          "B√ºlent Ersoy Bir Ben Bir Allah Biliyor"
        ]
      },
      {
        title: "Biraz H√ºz√ºn",
        subtitle: "ƒ∞√ß √ßeki≈ü",
        photo: "https://source.unsplash.com/featured/?dark,smoke,moody",
        list: [
          "Ahmet Kaya Nereden Bileceksiniz",
          "Sezen Aksu T√ºkeneceƒüiz",
          "Cem Adrian Ben Seni √áok Sevdim",
          "Ferdi Tayfur Ben de √ñzledim"
        ]
      },
      {
        title: "Sohbet A√ßƒ±k",
        subtitle: "G√ºl√º≈ü",
        photo: "https://source.unsplash.com/featured/?dark,friends,night",
        list: [
          "MF√ñ Ele G√ºne Kar≈üƒ±",
          "Yeni T√ºrk√º Olmasa Mektubun",
          "B√ºlent Orta√ßgil Eyl√ºl Ak≈üamƒ±",
          "Ajda Pekkan Kimler Geldi Kimler Ge√ßti"
        ]
      },
      {
        title: "Nostalji",
        subtitle: "Eskimez",
        photo: "https://source.unsplash.com/featured/?dark,retro,vinyl",
        list: [
          "Barƒ±≈ü Man√ßo G√ºlpembe",
          "Cem Karaca Tamirci √áƒ±raƒüƒ±",
          "Erkin Koray √á√∂p√ß√ºler",
          "Sezen Aksu G√ºl√ºmse"
        ]
      }
    ];

    // S√ñZ kartlarƒ±: her karta tek ≈üarkƒ± baƒülƒ±
    const QUOTE_CARDS = [
      { text: "Bu masa sessiz deƒüil; sadece derin.", songQuery: "Zeki M√ºren ≈ûimdi Uzaklardasƒ±n", photo: "https://source.unsplash.com/featured/?dark,table,candle" },
      { text: "Bir ≈üarkƒ± a√ßƒ±lƒ±r‚Ä¶ konu≈üacak yer bulunur.", songQuery: "Sezen Aksu T√ºkeneceƒüiz", photo: "https://source.unsplash.com/featured/?dark,city,night" },
      { text: "Kadeh doluysa deƒüil; niyet doluysa g√ºzeldir.", songQuery: "M√ºzeyyen Senar Ben Seni Unutmak ƒ∞√ßin Sevmedim", photo: "https://source.unsplash.com/featured/?dark,glass,reflection" },
      { text: "Bu masada acele yok. ≈ûarkƒ± bitmeden kalkƒ±lmaz.", songQuery: "B√ºlent Orta√ßgil Eyl√ºl Ak≈üamƒ±", photo: "https://source.unsplash.com/featured/?dark,wood,grain" }
    ];

    const CHAT_CARDS = [
      "Bu masada herkes bir ≈üey anlatsa‚Ä¶ sen ne anlatƒ±rdƒ±n?",
      "Seni en √ßok hangi ≈üarkƒ± ‚Äòaynƒ± masaya‚Äô geri g√∂t√ºr√ºr?",
      "Bug√ºn bu masanƒ±n adƒ± ne olsun? (Tek kelime.)",
      "En son ger√ßekten g√ºld√ºƒü√ºn an neydi?",
      "Birine ‚Äòiyi ki‚Äô demek istesen, kime dersin?"
    ];

    // hedef belirleme i√ßin ki≈üi listesi (demo) ‚Äî burayƒ± sen sonra dinamik yaparsƒ±n
    const PLAYERS = ["Ali", "Ay≈üe", "Mehmet", "Zeynep", "Can"];

    // ====== HELPERS ======
    const $ = (id) => document.getElementById(id);

    function showView(viewId){
      ["homeView","musicView","quoteView","chatView"].forEach(v => $(v).classList.remove("active"));
      $(viewId).classList.add("active");
      window.scrollTo({top:0, behavior:"instant"});
    }

    function openYouTubeSearch(query){
      const q = encodeURIComponent((query||"").trim());
      const url = "https://www.youtube.com/results?search_query=" + q;
      window.open(url, "_blank", "noopener,noreferrer");
    }

    function pickRandom(arr){
      return arr[Math.floor(Math.random() * arr.length)];
    }

    // ====== HOME NAV ======
    $("openMusic").onclick = () => showView("musicView");
    $("openQuote").onclick = () => { drawQuote(true); showView("quoteView"); };
    $("openChat").onclick  = () => { drawChat(true); showView("chatView"); };

    $("closeMusic").onclick = () => showView("homeView");
    $("closeQuote").onclick = () => showView("homeView");
    $("closeChat").onclick  = () => showView("homeView");

    // ====== MUSIC VIEW ======
    const moodGrid = $("moodGrid");
    MOODS.forEach(m => {
      const el = document.createElement("div");
      el.className = "mood";
      el.innerHTML = `
        <div class="mphoto" style="background-image:url('${m.photo}')"></div>
        <div class="moverlay"></div>
        <div class="t">${m.title}</div>
        <div class="s">${m.subtitle}</div>
      `;
      el.onclick = () => {
        const song = pickRandom(m.list);
        openYouTubeSearch(song);
      };
      moodGrid.appendChild(el);
    });

    $("randomPlay").onclick = () => {
      const all = MOODS.flatMap(m => m.list);
      openYouTubeSearch(pickRandom(all));
    };

    $("searchYouTube").onclick = () => {
      const val = $("songInput").value || "";
      if(!val.trim()){ $("songInput").focus(); return; }
      openYouTubeSearch(val);
    };
    $("songInput").addEventListener("keydown", (e) => {
      if(e.key === "Enter") $("searchYouTube").click();
    });

    // ====== QUOTE VIEW (flip + nav) ======
    let quoteIndex = 0;
    const quoteFlip = $("quoteFlip");
    const quoteText = $("quoteText");
    const quoteBackPhoto = $("quoteBackPhoto");

    function setQuoteCard(i){
      const c = QUOTE_CARDS[i];
      quoteText.textContent = c.text;
      quoteBackPhoto.style.backgroundImage = `url('${c.photo}')`;
      // yeni karta ge√ßince KAPALI gelsin
      quoteFlip.classList.remove("open");
    }

    function drawQuote(randomPick=false){
      quoteIndex = randomPick ? Math.floor(Math.random() * QUOTE_CARDS.length) : quoteIndex;
      setQuoteCard(quoteIndex);
    }

    // karta dokununca a√ß/kapat
    quoteFlip.addEventListener("click", () => {
      quoteFlip.classList.toggle("open");
    });

    $("quotePrev").onclick = () => {
      quoteIndex = (quoteIndex - 1 + QUOTE_CARDS.length) % QUOTE_CARDS.length;
      setQuoteCard(quoteIndex);
    };
    $("quoteNext").onclick = () => {
      quoteIndex = (quoteIndex + 1) % QUOTE_CARDS.length;
      setQuoteCard(quoteIndex);
    };
    $("quotePlay").onclick = () => {
      const c = QUOTE_CARDS[quoteIndex];
      openYouTubeSearch(c.songQuery);
    };

    // ====== CHAT VIEW (flip + nav + target) ======
    let chatIndex = 0;
    const chatFlip = $("chatFlip");
    const chatText = $("chatText");
    const targetName = $("targetName");
    const arrow = $("arrow");

    function setChatCard(i){
      chatText.textContent = CHAT_CARDS[i];
      chatFlip.classList.remove("open"); // yeni karta ge√ßince kapalƒ±
      targetName.textContent = "‚Äî";
    }

    function drawChat(randomPick=false){
      chatIndex = randomPick ? Math.floor(Math.random() * CHAT_CARDS.length) : chatIndex;
      setChatCard(chatIndex);
    }

    chatFlip.addEventListener("click", () => {
      chatFlip.classList.toggle("open");
    });

    $("chatPrev").onclick = () => {
      chatIndex = (chatIndex - 1 + CHAT_CARDS.length) % CHAT_CARDS.length;
      setChatCard(chatIndex);
    };
    $("chatNext").onclick = () => {
      chatIndex = (chatIndex + 1) % CHAT_CARDS.length;
      setChatCard(chatIndex);
    };

    // hedef belirleme: ok d√∂ner + isim se√ßer
    let spinLock = false;
    $("pickTarget").onclick = () => {
      if(spinLock) return;
      spinLock = true;

      const picked = pickRandom(PLAYERS);
      const turns = 4 + Math.random() * 3; // 4-7 tur
      const deg = turns * 360 + Math.floor(Math.random()*360);

      arrow.style.transform = `rotate(${deg}deg)`;

      setTimeout(() => {
        targetName.textContent = picked;
        spinLock = false;
      }, 1200);
    };

    // ====== FOOTER MODALS ======
    const modal = $("modal");
    const modalTitle = $("modalTitle");
    const modalBody = $("modalBody");

    function openModal(title, html){
      modalTitle.textContent = title;
      modalBody.innerHTML = html;
      modal.classList.add("show");
    }
    function closeModal(){ modal.classList.remove("show"); }
    $("modalClose").onclick = closeModal;
    modal.addEventListener("click", (e) => { if(e.target === modal) closeModal(); });

    $("aboutBtn").onclick = () => openModal("Hakkƒ±nda", `
      <p>HARDIN masa setleri, k√º√ß√ºk bir dokunu≈üla masaya anlam katar.</p>
      <p>√ú√ß buton: <b>≈ûarkƒ±</b>, <b>S√∂z</b>, <b>Sohbet</b>.</p>
    `);

    $("contactBtn").onclick = () => openModal("ƒ∞leti≈üim", `
      <p>Instagram: <b>@hardin</b> (√∂rnek)</p>
      <p>E-posta: <b>info@hardin.com</b> (√∂rnek)</p>
    `);

    $("feedbackBtn").onclick = () => openModal("Talep & ≈ûikayet", `
      <p>Kƒ±sa notunu yaz, bize ula≈üsƒ±n. (V1 demo)</p>
      <div style="display:flex; gap:10px; flex-direction:column;">
        <input class="inp" placeholder="Mesajƒ±n‚Ä¶" />
        <button class="btn primary" onclick="alert('Alƒ±ndƒ± ‚úÖ (demo)')">G√∂nder</button>
      </div>
    `);

    // ƒ∞lk y√ºk
    drawQuote(true);
    drawChat(true);
  </script>
</body>
</html>
